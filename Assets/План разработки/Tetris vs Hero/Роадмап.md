# 🗺 Роадмап

---

> [!success]- ✅ Фаза 0 — Концепция и архитектура
> - [x] Игровая концепция, победные условия, конфликт интересов
> - [x] MVC архитектура — 12 скриптов спроектировано
> - [x] Все скрипты написаны и компилируются
> - [x] Взаимодействия: crush, HP-визуал, фидбек удара по сильному блоку
> - [x] Мультиплеер архитектура задокументирована

---

> [!tip]+ 🔄 Фаза 1 — Single Player  ← **сейчас**
>
> **Скрипты**
> - [x] CellData, TetrominoData, ActivePiece
> - [x] TetrisBoard — коллизии, очистка линий, урон блокам
> - [x] VictoryModel — счёт, события победы
> - [x] BoardRenderer — рендер ячеек, HP-цвет, ghost
> - [x] CharacterView — flip, анимации, PlayHitStrong
> - [x] GameUI — TextMeshPro счётчики
> - [x] TetrisController — ввод, падение, спавн, state machine
> - [x] CharacterController2D — Celeste-физика, AABB, ExtraOccupied
> - [x] BlockInteraction — удар → DamageCell → VictoryModel
> - [x] GameManager — связывает всё, crush detection
>
> **Unity сцена**
> - [ ] Создать GameObjects и привязать скрипты
> - [ ] Назначить ссылки в Inspector
> - [ ] Добавить спрайт для BoardRenderer
> - [ ] Настроить Animator персонажа
>
> **Playtest и баланс**
> - [ ] Тетрис: фигуры падают, линии очищаются
> - [ ] Персонаж: движение, прыжок, wall-jump, удар
> - [ ] Crush и победа персонажа работают
> - [ ] Подобрать `blocksToWin`, `weakPieceChance`, `fallInterval`
>
> → [[Фаза 1 — Single Player]]

---

> [!abstract]- ⏳ Фаза 2 — Мультиплеер MVP
>
> **Подготовка**
> - [ ] Установить Netcode for GameObjects
> - [ ] Установить Unity Relay
> - [ ] Настроить UGS проект
>
> **NetworkManager**
> - [ ] NetworkManager GameObject + UnityTransport
> - [ ] Зарегистрировать NetworkPrefabs
>
> **Рефакторинг скриптов**
> - [ ] `GameManager` → NetworkBehaviour + NetworkVariable состояния
> - [ ] `TetrisController` → NetworkBehaviour + NetworkVariables активной фигуры
> - [ ] `CharacterController2D` → NetworkBehaviour + IsOwner guard
> - [ ] `BlockInteraction` → AttackServerRpc
> - [ ] Crush detection → `if (!IsServer) return`
>
> **Синхронизация**
> - [ ] NetworkTransform + NetworkAnimator на персонажа
> - [ ] ClientRpc: PiecePlaced, LinesCleared, BlockDamaged, GameOver
>
> **Сессия**
> - [ ] UI кнопки Host / Join + поле JoinCode
> - [ ] Unity Relay: создать и присоединиться по коду
> - [ ] OnClientDisconnectCallback → GameOver
>
> **Тест**
> - [ ] Один компьютер (ParrelSync)
> - [ ] Два компьютера через Relay
>
> → [[Фаза 2 — Мультиплеер MVP]]

---

> [!abstract]- ⏳ Фаза 3 — Полировка
>
> **Звук**
> - [ ] Фоновая музыка, звуки тетриса, звуки персонажа
>
> **Визуальные эффекты**
> - [ ] Частицы при разрушении блока
> - [ ] Camera shake при crush
> - [ ] Эффект очистки линии
>
> **UI**
> - [ ] Прогресс-бар блоков
> - [ ] Экран победы/поражения
> - [ ] Главное меню
>
> **Финал**
> - [ ] Финальная балансировка
> - [ ] Build Windows x64
> - [ ] Тест на чистой машине
>
> → [[Фаза 3 — Полировка]]

---

← [[Tetris vs Hero]] · [[Статус реализации]] · → [[Фаза 1 — Single Player]]
